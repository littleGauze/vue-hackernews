"use strict";(self.webpackChunkvue_hackernews=self.webpackChunkvue_hackernews||[]).push([[856],{856:(t,e,s)=>{s.r(e),s.d(e,{default:()=>m});const n={name:"comment",props:{id:String},data:function(){return{open:!0}},computed:{comment:function(){return this.$store.state.items[this.id]}},methods:{pluralize:function(t){return t+(1===t?" reply":" replies")}}};var i=s(900);const o=(0,i.Z)(n,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.comment?s("li",{staticClass:"comment"},[s("div",{staticClass:"by"},[s("router-link",{attrs:{to:"/user/"+t.comment.by}},[t._v(t._s(t.comment.by))]),t._v("\n    "+t._s(t._f("timeAgo")(t.comment.time))+" ago\n  ")],1),s("div",{staticClass:"text",domProps:{innerHTML:t._s(t.comment.text)}}),t.comment.kids&&t.comment.kids.length?s("div",{staticClass:"toggle",class:{open:t.open}},[s("a",{on:{click:function(e){t.open=!t.open}}},[t._v("\n      "+t._s(t.open?"[-]":"[+] "+t.pluralize(t.comment.kids.length)+" collapsed")+"\n    ")])]):t._e(),s("ul",{directives:[{name:"show",rawName:"v-show",value:t.open,expression:"open"}],staticClass:"comment-childre"},t._l(t.comment.kids,(function(t){return s("comment",{key:t,attrs:{id:t}})})),1)]):t._e()}),[],!1,null,null,null).exports,r={name:"spinner",props:{show:Boolean},serverCacheKey:function(t){return t.show}};const a={name:"item-view",components:{Comment:o,Spinner:(0,i.Z)(r,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",[s("svg",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"spinner",class:{show:t.show},attrs:{width:"44px",height:"44px",viewBox:"0 0 44 44"}},[s("circle",{staticClass:"path",attrs:{fill:"none","stroke-width":"4","stroke-linecap":"round",cx:"22",cy:"22",r:"20"}})])])}),[],!1,null,null,null).exports},data:function(){return{loading:!1}},computed:{item:function(){return this.$store.state.items[this.$route.params.id]}},asyncData:function(t){var e=t.store,s=t.route.params.id;return e.dispatch("FETCH_ITEMS",{ids:[s]})},title:function(){return this.item.title},beforeMount:function(){this.fetchItems()},methods:{fetchItems:function(){var t=this;this.item&&this.item.kids&&(this.loading=!0,function(t,e){if(e&&e.kids)return t.dispatch("FETCH_ITEMS",{ids:e.kids}).then((function(){return Promise.all(e.kids.map((function(e){return fetchItems(t,t.state.items[e])})))}))}(this.$store,this.item).then((function(){t.loading=!1})))}}},m=(0,i.Z)(a,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.item?s("div",{staticClass:"item-view"},[t.item?[s("div",{staticClass:"item-view-header"},[s("a",{attrs:{href:t.item.url,target:"_blank"}},[s("h1",[t._v(t._s(t.item.title))])]),t.item.url?s("span",{staticClass:"host"},[t._v("\n        ("+t._s(t._f("host")(t.item.url))+")\n      ")]):t._e(),s("p",{staticClass:"meta"},[t._v("\n        "+t._s(t.it.score)+" points\n        | by "),s("router-link",{attrs:{to:"/user/"+t.item.by}},[t._v(t._s(t.item.by))]),t._v("\n        "+t._s(t._f("timeAgo")(t.item.time))+" ago\n      ")],1)]),s("div",{staticClass:"item-view-comments"},[s("p",{staticClass:"item-view-comments-header"},[t._v("\n        "+t._s(t.item.kids?t.item.descendants+" comments":"No comment yet.")+"\n        "),s("spinner",{attrs:{show:t.loading}})],1),t.loading?t._e():s("ul",{staticClass:"comment-children"},t._l(t.item.kids,(function(t){return s("comment",{key:t,attrs:{id:t}})})),1)])]:t._e()],2):t._e()}),[],!1,null,null,null).exports}}]);